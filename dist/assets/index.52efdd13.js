import{c as V,a as $,r as _,o as u,b as C,d as l,e as n,F as p,f,g as h,w as I,h as b,t as v,u as N,i as L,p as A,j as E,k as R,l as P,m as Q,n as T}from"./vendor.8ac01b8c.js";const j=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}};j();const O=()=>({searchResults:[],myBooks:[]}),q={getUrl:()=>location.hostname.includes("localhost")?"http://localhost:3000/api":"",getBook:t=>e=>{let o=t.myBooks;for(let i in e)o=o.filter(s=>s[i]===e[i]);return o[0]}},F={async searchBooks(t,e){try{let o=await $({method:"GET",url:`https://openlibrary.org/search.json?q=${e.query}`});o.status===200?t.commit("updateResults",o.data.docs):console.error(o)}catch(o){throw o}},async crudAction(t,e){try{let o=`${t.getters.getUrl}/${e.route}`;if(e.id)o+=`/${e.id}`;else if(e.query)for(let s in e.query)Object.keys(e.query).indexOf(s)===0?o+=`?${s}=${e.query[s]}`:o+=`&${s}=${e.query[s]}`;return(await $({method:e.method,url:o,data:e.body,headers:{"Content-Type":"application/json"}})).data.data}catch(o){return o}}},D={updateResults(t,e){t.searchResults=[];for(let o of e)o.isbn&&o.title&&o.author_name&&t.searchResults.push({imgURL:o.isbn[0],title:o.title,author:o.author_name[0]})},updateMyBooks(t,e){if(Array.isArray(e))for(let o of e){let i=t.myBooks.findIndex(s=>s.id===o.id);t.myBooks.splice(i,1),t.myBooks.push(o)}else{let o=t.myBooks.findIndex(i=>i.id===e.id);t.myBooks.splice(o,1),t.myBooks.push(e)}},addToMyBooks(t,e){t.myBooks.push(e)}};var H=V({state:O,getters:q,actions:F,mutations:D});var m=(t,e)=>{for(const[o,i]of e)t[o]=i;return t};const G={methods:{async fetchMyBooks(){let t=await this.$store.dispatch("crudAction",{route:"books",method:"GET"});this.$store.commit("updateMyBooks",t)}},mounted(){this.fetchMyBooks()}};function K(t,e,o,i,s,r){const c=_("router-view");return u(),C(c)}var W=m(G,[["render",K]]);const z={name:"Nav Bar",data(){return{links:[{name:"Search",text:"Search",path:"/"},{name:"MyBooks",text:"My Books",path:"/mybooks"}]}}},J=n("header",null,[n("h1",null,"Book Me"),n("h2",null,"For DGM 3760")],-1),X={class:"nav"};function Y(t,e,o,i,s,r){const c=_("router-link");return u(),l(p,null,[J,n("div",X,[n("ul",null,[(u(!0),l(p,null,f(s.links,(d,a)=>(u(),l("li",{key:a},[h(c,{to:d.path},{default:I(()=>[b(v(d.text),1)]),_:2},1032,["to"])]))),128))])])],64)}var x=m(z,[["render",Y]]);const Z={name:"Search",props:{modelValue:{type:String}},methods:{updateValue(t){this.$emit("update:modelValue",t.target.value)}}},ee=["value"];function te(t,e,o,i,s,r){return u(),l("input",{type:"text",value:o.modelValue,onInput:e[0]||(e[0]=(...c)=>r.updateValue&&r.updateValue(...c))},null,40,ee)}var w=m(Z,[["render",te]]);const B={name:"Book Preview",props:{imgURL:{type:String},title:{type:String},author:{type:String},myBook:{type:Object}},methods:{async toggleReadLater(t){let e=await this.checkDBForExisting(t);e?this.updateBook(e._id,{readLater:!e.readLater}):this.addNewBook(t)},async toggleHaveRead(t){let e=await this.checkDBForExisting(t);e?this.updateBook(e._id,{haveRead:!e.haveRead}):this.addNewBook(t)},async checkDBForExisting(t){return this.$store.getters.getBook(t)},async addNewBook(t){let e=await this.$store.dispatch("crudAction",{route:"books",method:"POST",body:t});this.$store.commit("addToMyBooks",e)},async updateBook(t,e){let o=await this.$store.dispatch("crudAction",{route:"books",method:"PUT",id:t,body:e});this.$store.commit("updateMyBooks",o)},async removeBook(t){await this.$store.dispatch("crudAction",{route:"books",method:"DELETE",id:t});let e=await this.$store.dispatch("crudAction",{route:"books",method:"GET"});this.$store.commit("updateMyBooks",e)}},computed:{haveReadColor(){var t;return((t=this.myBook)==null?void 0:t.haveRead)?"#0000ff":"#383838"},readLaterColor(){var t;return((t=this.myBook)==null?void 0:t.readLater)?"#0000ff":"#383838"}}},S=()=>{N(t=>({"100eff63":t.readLaterColor,"0485d72f":t.haveReadColor}))},U=B.setup;B.setup=U?(t,e)=>(S(),U(t,e)):S;const oe=B,g=t=>(A("data-v-68ccfe76"),t=t(),E(),t),se={id:"previewCard"},re={class:"coverImg"},ne=["src"],ae={class:"bookInfo"},ie={key:0,class:"remove-icon"},ce=g(()=>n("i",{class:"fas fa-times"},null,-1)),ue=[ce],le={class:"action-btns"},de=g(()=>n("i",{class:"fas fa-bookmark"},null,-1)),_e=[de],he=g(()=>n("i",{class:"fas fa-book-open"},null,-1)),me=[he];function pe(t,e,o,i,s,r){return u(),l("div",se,[n("div",re,[o.imgURL?(u(),l("img",{key:0,class:"book-cover",src:`https://covers.openlibrary.org/b/isbn/${o.imgURL}-M.jpg`},null,8,ne)):L("",!0)]),n("div",ae,[n("h2",null,v(o.title),1),n("h4",null,v(o.author),1)]),o.myBook?(u(),l("div",ie,[n("button",{onClick:e[0]||(e[0]=c=>r.removeBook(o.myBook._id))},ue)])):L("",!0),n("div",le,[n("button",{onClick:e[1]||(e[1]=c=>r.toggleReadLater({title:o.title,author:o.author,imgURL:o.imgURL}))},_e),n("button",{onClick:e[2]||(e[2]=c=>r.toggleHaveRead({title:o.title,author:o.author,imgURL:o.imgURL}))},me)])])}var M=m(oe,[["render",pe],["__scopeId","data-v-68ccfe76"]]);const ye={data(){return{searchQuery:""}},components:{SearchInput:w,BookPreview:M},methods:{searchBooks(t){this.$store.dispatch("searchBooks",{query:t})}},computed:{searchResults(){return this.$store.state.searchResults},myBooks(){return this.$store.state.myBooks}}},ke={class:"search-div"},fe={id:"search-list"};function ve(t,e,o,i,s,r){const c=_("SearchInput"),d=_("BookPreview");return u(),l("div",null,[n("div",ke,[h(c,{class:"search-input",modelValue:s.searchQuery,"onUpdate:modelValue":e[0]||(e[0]=a=>s.searchQuery=a),onKeyup:e[1]||(e[1]=R(a=>r.searchBooks(s.searchQuery),["enter"]))},null,8,["modelValue"]),n("button",{id:"search-btn",onClick:e[2]||(e[2]=a=>r.searchBooks(s.searchQuery))},"Search")]),n("ul",fe,[(u(!0),l(p,null,f(r.searchResults,(a,y)=>(u(),l("li",{key:y},[h(d,{imgURL:a.imgURL,title:a.title,author:a.author,myBook:r.myBooks.find(k=>k.title===a.title&&k.author===a.author&&k.imgURL===a.imgURL)},null,8,["imgURL","title","author","myBook"])]))),128))])])}var Be=m(ye,[["render",ve],["__scopeId","data-v-c1d979de"]]);const ge={name:"Home",components:{BookSearch:Be,NavBar:x}},$e=n("footer",null,null,-1),be=b("> ");function Le(t,e,o,i,s,r){const c=_("NavBar"),d=_("BookSearch");return u(),l(p,null,[h(c),h(d),$e,be],64)}var Re=m(ge,[["render",Le]]);const xe={data(){return{searchQuery:""}},components:{SearchInput:w,BookPreview:M},methods:{},computed:{getMyBooks(){return this.$store.state.myBooks}}},we={class:"search-div"},Se={id:"search-list"};function Ue(t,e,o,i,s,r){const c=_("SearchInput"),d=_("BookPreview");return u(),l("div",null,[n("div",we,[h(c,{class:"search-input",modelValue:s.searchQuery,"onUpdate:modelValue":e[0]||(e[0]=a=>s.searchQuery=a),onKeyup:e[1]||(e[1]=R(a=>t.searchBooks(s.searchQuery),["enter"]))},null,8,["modelValue"]),n("button",{id:"search-btn",onClick:e[2]||(e[2]=a=>t.searchBooks(s.searchQuery))},"Search")]),n("ul",Se,[(u(!0),l(p,null,f(r.getMyBooks,(a,y)=>(u(),l("li",{key:y},[h(d,{imgURL:a.imgURL,title:a.title,author:a.author,myBook:a},null,8,["imgURL","title","author","myBook"])]))),128))])])}var Me=m(xe,[["render",Ue],["__scopeId","data-v-77be3698"]]);const Ve={name:"About",components:{NavBar:x,MyLibrary:Me}};function Ce(t,e,o,i,s,r){const c=_("NavBar"),d=_("MyLibrary");return u(),l(p,null,[h(c),n("div",null,[h(d)])],64)}var Ie=m(Ve,[["render",Ce]]);const Ne=P({history:Q(),routes:[{path:"/",name:"Search",component:Re},{path:"/mybooks",name:"About",component:Ie}]});T(W).use(H).use(Ne).mount("#app");
